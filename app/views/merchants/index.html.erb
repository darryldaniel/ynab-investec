<div class="flex-col">
    <h1 class="text-xl mb-5">Map Merchants</h1>
    <% @merchants.each do |merchant| %>
        <%= turbo_frame_tag dom_id(merchant) do %>
            <%= form_with url: update_ynab_mapping_merchants_path, method: :patch do |form| %>
                <div class="flex flex-col items-start rounded overflow-hidden p-5 mb-4 shadow-lg">
                    <h2 class="font-bold text-xl mb-6"><%= merchant.name %></h2>
                    <%= form.hidden_field :merchant_id, value: merchant.id %>
                    <label for="payee">Choose a flavor:</label>
                    <input list="payee-list"
                           id="payee"
                           name="payee"
                           class="p-2 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                        />
                    <datalist id="payee-list">
                        <% @ynab_payees.each do |payee| %>
                            <option value="<%= payee.id %>" label="<%= payee.name %>">
                            </option>
                        <% end %>
                    </datalist>

                    <div class="my-4">
                        <%= form.check_box :exclude %>
                        <%= form.label :exclude, "Exclude" %>
                    </div>

                    <%= form.submit "Update",
                                    data: { turbo_submits_with: "Updating..." },
                                    class: "bg-transparent hover:bg-gray-600 text-gray-700 font-semibold hover:text-white py-2 px-4 border border-gray-500 hover:border-transparent rounded" %>
                </div>
            <% end %>
        <% end %>
    <% end %>
</div>
